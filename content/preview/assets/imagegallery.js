/* 
 * ZP Image-Gallery Widget
 * Copyright $Date:: 2015#$ Zeta Software GmbH
 */
$z(document).ready(function(){$z(".zpImageGallery[id]").each(function(){new zp.ImageGallery().init("#"+this.id.toString())});$z(".zpSlideshow[id]").each(function(){new zp.Slideshow().init("#"+this.id.toString())})});zp.ImageGallery=function(){this.root=null;this.numbershow=true;this.titleshow=false;this.htmltitle="";this.kind="gallery";this.width=200;this.height=150;this.bordercolor="silver";this.borderwidth=0;this.margin=10;this.overlaycolor="black";this.titleposition="over";this.transition="elastic";this.slideshow=false;this.slideshowinterval=5000;this.slideshowtimer=0;this.lang="de";var a=this;this.init=function(b){if(!($z.fancybox)){trace("Fehler: Fancybox ist nicht geladen")}a.root=b;a.numbershow=$z(a.root).data("numbershow")!==0?true:false;a.titleshow=$z(a.root).data("titleshow")!==0?true:false;a.htmltitle=$z(a.root).data("htmltitle");a.kind=$z(a.root).data("kind");a.width=$z(a.root).data("width");if(parseInt(a.width)){a.width=a.width+"px"}a.height=$z(a.root).data("height");if(parseInt(a.height)){a.height=a.height+"px"}if(a.height=="auto"&&$z(a.root).hasClass("zpSlideshow")){a.width="auto";var c=$z(a.root).data("maxheight")/$z(a.root).data("width");var g=$z(a.root).parent().parent().width();var f=Math.round(g*c);$z(a.root).parent().width(g+2).height(f+6);$z(a.root).width(g+2).height(f+6);$z(a.root+" .slide").width(g).height(f+4).css({paddingRight:"2px",paddingBottom:"2px"});$z(a.root+" .slide .caption").width(g-2)}a.bordercolor=$z(a.root).data("bordercolor");a.borderwidth=$z(a.root).data("borderwidth");a.margin=$z(a.root).data("margin");a.titleposition=$z(a.root).data("titleposition");a.zoom=$z(a.root).data("transition");a.transition=$z(a.root).data("inner-transition");if(a.transition==="none"){a.changeFade=0}else{a.changeFade=100}a.slideshow=$z(a.root).data("slideshow")!==0?true:false;a.slideshowinterval=$z(a.root).data("slideshowinterval")*1000;a.slideshowtimer=0;a.lang=$z(a.root).data("lang");$z(a.root+" .fancybox").fancybox({hideOnContentClick:true,padding:0,margin:30,cyclic:true,changeSpeed:0,changeFade:a.changeFade,speedIn:300,speedOut:300,transitionIn:a.zoom,transitionOut:a.zoom,easingIn:"easeOutCubic",easingOut:"easeInCubic",titleShow:a.titleshow,overlayColor:a.overlaycolor,overlayOpacity:0.85,titlePosition:a.titleposition,titleFormat:function(l,j,k){if(typeof a.htmltitle!="undefined"&&a.htmltitle!==null&&a.htmltitle!==""){l=a.htmltitle}if(j.length>1&&a.numbershow){if(a.lang==="en"){return'<span id="fancybox-title-over">Image '+(k+1)+" of "+j.length+(l?": "+l:"")+"</span>"}else{return'<span id="fancybox-title-over">Bild '+(k+1)+" von "+j.length+(l?": "+l:"")+"</span>"}}else{return'<span id="fancybox-title-over">'+l+"</span>"}},onComplete:function(){if(a.slideshow){a.slideshowtimer=setInterval($z.fancybox.next,a.slideshowinterval)}},onCleanup:function(){if(a.slideshow){clearInterval(a.slideshowtimer)}}});var d=document.getElementsByTagName("head")[0],i=document.createElement("style"),e="	"+a.root+"{overflow: hidden;";if(a.kind==="singleimageleft"){e+=" width: "+a.width+"; min-height: "+a.height+"; float: left; margin-right: 20px; margin-bottom: 5px;"}else{if(a.kind==="singleimageright"){e+=" width: "+a.width+"; min-height: "+a.height+"; float: right; margin-left: 20px; margin-bottom: 5px;"}else{if(a.kind==="singleimagecenter"){e+=" width: "+a.width+"; float: none !important; margin: 0 auto 5px auto;"}else{if(a.kind==="singleimage"){e+=" width: "+a.width+"; float: none !important; margin-bottom: 5px;"}else{if(a.kind==="singleimager"){e+=" width: "+a.width+"; float: none !important; margin: 0 0 5px auto;"}}}}}e+="}";e+=a.root+" > a, "+a.root+" .slide > a { 				width: "+a.width+"; 				height: "+a.height+"; 				box-sizing: border-box; 				margin: 0 "+a.margin+"px "+a.margin+"px 0; ";if(a.bordercolor=="default"){e+=""}else{if(a.bordercolor!=="transparent"){e+="	border: "+a.borderwidth+"px solid "+a.bordercolor+"; box-sizing: border-box;"}else{e+="	border: none ;"}}e+="		padding: 0px; 				display: block; 				text-align: center; 				vertical-align: middle; 				float: left; 				overflow: hidden; 			}";e+=a.root+" > a img { 				border: none !important;}";var h=document.createTextNode(e.replace(/\s+/g," "));i.type="text/css";if(i.styleSheet){i.styleSheet.cssText=h.nodeValue}else{i.appendChild(h)}d.appendChild(i)}};zp.Slideshow=function(){this.root=null;this.slideshowinterval=5000;this.pauseonhover=true;var a=this;this.init=function(b){a.root=b;a.slideshowinterval=$z(a.root).data("slideshowinterval")*1000;a.pauseonhover=$z(a.root).data("pauseonhover")!==0?true:false;$z(b+" div.slide:not(:first)").css("opacity","0");a.slideshow=setInterval(function(){a.slideSwitch(b)},a.slideshowinterval);$z(a.root).hover(function(){if(a.pauseonhover){clearInterval(a.slideshow)}$z(document).keydown(function(c){if(c.which===37){a.slideSwitch(b,"prev")}else{if(c.which===39){a.slideSwitch(b,"next")}}})},function(){$z(document).unbind("keydown");if(a.pauseonhover){a.slideshow=setInterval(function(){a.slideSwitch(b)},a.slideshowinterval)}})};this.slideSwitch=function(e,d){d=typeof d!=="undefined"?d:"next";var b=$z(e+" div.slide.active");if(b.length===0){b=$z(e+" div.slide:first")}var c;if(d==="next"){c=b.next(".slide").length?b.next(".slide"):$z(e+" div.slide:first")}else{if(d==="prev"){c=b.prev(".slide").length?b.prev(".slide"):$z(e+" div.slide:last")}}b.addClass("last-active").css({"z-index":101});c.css({opacity:"0.0"}).addClass("active").css({"z-index":102}).animate({opacity:"1.0"},500,function(){b.removeClass("active last-active").css({"z-index":"100",opacity:"0"})})}};